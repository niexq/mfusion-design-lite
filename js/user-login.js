(self.webpackChunkappworks_fusion_design_lite=self.webpackChunkappworks_fusion_design_lite||[]).push([[528],{64922:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return C}});var o=i(67294),r=i(70234),t=i(31568),s=i(30411),a=i(97026),l=i(75999),c=i(69338),u=i(33486),d=i(61414),m=i(44342),f=i(24829),g=i(35235);function h(e,n){var i=(0,o.useRef)(null);(0,o.useEffect)((function(){i.current=e})),(0,o.useEffect)((function(){var e;if(null!==n){var o=setInterval((function e(){i.current()}),n||0);return function(){return clearInterval(o)}}}),[n])}var p=i(62856),v=i.n(p),x=i(85893);function j(e,n){return N(e)||B(e,n)||k(e,n)||L()}function L(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,n){if(e){if("string"==typeof e)return y(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?y(e,n):void 0}}function y(e,n){(null==n||n>e.length)&&(n=e.length);for(var i=0,o=new Array(n);i<n;i++)o[i]=e[i];return o}function B(e,n){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],r=!0,t=!1,s,a;try{for(i=i.call(e);!(r=(s=i.next()).done)&&(o.push(s.value),!n||o.length!==n);r=!0);}catch(e){t=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(t)throw a}}return o}}function N(e){if(Array.isArray(e))return e}var w=r.Z.Item,b={name:"",password:"",autoLogin:!0,phone:"",code:""},Z=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dataSource:b},i=(0,m.aC)(),p=j(i,2),L=p[0],k=p[1],y=n.dataSource,B=void 0===y?b:y,N=g.Z.useModel("user"),Z=j(N,2),I=Z[0],S=Z[1],A=(0,o.useState)(B),C=j(A,2),q=C[0],E=C[1],z=(0,o.useState)(!1),T=j(z,2),X=T[0],K=T[1],M=(0,o.useState)(!1),_=j(M,2),Q=_[0],F=_[1],W=(0,o.useState)(59),O=j(W,2),U=O[0],Y=O[1];h((function(){Y(U-1),U<=0&&(K(!1),Y(59))}),X?1e3:null);var P=function e(n){E(n)},R=function e(n,i){i||K(!0)},V=function e(n,i){if(i)console.log("errors",i);else{console.log("values:",n);var o={};Q?(o.phone=n.phone,o.code=n.code):(o.account=n.name,o.password=n.password),o.autoLogin=n.autoLogin,(0,f.Wy)(o).then((function(e){if(0!==(null==e?void 0:e.code));else{var n,i;if(t.Z.success("\u767b\u5f55\u6210\u529f"),localStorage.setItem("TOKEN",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:""),k({isLogin:!0}),(0,f.Le)().then((function(e){if(0===e.code){var n=e.data;setTimeout((function(){var e,i;k({isLogin:!0,currentUser:{name:null!==(e=null==n?void 0:n.accountName)&&void 0!==e?e:"-",department:"",avatar:"https://gw.alipayobjects.com/zos/antfincdn/XAosXuNZyF/BiazfanxmamNRoxxVxka.png",userId:null!==(i=null==n?void 0:n.userId)&&void 0!==i?i:"-"}})}),300)}})),!u.m8)return;var o=null===d.Qw||void 0===d.Qw?void 0:(0,d.Qw)();u.m8.push(null!==(i=null==o?void 0:o.redirect)&&void 0!==i?i:"/")}}))}},G=(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(w,{format:"tel",required:!0,requiredMessage:"\u5fc5\u586b",asterisk:!1,children:(0,x.jsx)(s.Z,{name:"phone",innerBefore:(0,x.jsxs)("span",{className:v().innerBeforeInput,children:["+86",(0,x.jsx)("span",{className:v().line})]}),maxLength:20,placeholder:"\u624b\u673a\u53f7"})}),(0,x.jsx)(w,{required:!0,requiredMessage:"\u5fc5\u586b",style:{marginBottom:0},children:(0,x.jsx)(s.Z,{name:"code",innerAfter:(0,x.jsxs)("span",{className:v().innerAfterInput,children:[(0,x.jsx)("span",{className:v().line}),(0,x.jsx)(r.Z.Submit,{text:!0,type:"primary",style:{width:64},disabled:!!X,validate:["phone"],onClick:R,className:v().sendCode,children:X?"".concat(U,"\u79d2\u540e\u518d\u8bd5"):"\u83b7\u53d6\u9a8c\u8bc1\u7801"})]}),maxLength:20,placeholder:"\u9a8c\u8bc1\u7801"})})]}),H=(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(w,{required:!0,requiredMessage:"\u5fc5\u586b",children:(0,x.jsx)(s.Z,{name:"name",maxLength:20,placeholder:"\u7528\u6237\u540d"})}),(0,x.jsx)(w,{required:!0,requiredMessage:"\u5fc5\u586b",style:{marginBottom:0},children:(0,x.jsx)(s.Z.Password,{name:"password",htmlType:"password",placeholder:"\u5bc6\u7801"})})]}),J=function e(){F(!1)},$=function e(){F(!0)};return(0,x.jsx)("div",{className:v().LoginBlock,children:(0,x.jsxs)("div",{className:v().innerBlock,children:[(0,x.jsx)("a",{href:"#",children:(0,x.jsx)("img",{className:v().logo,src:"https://img.alicdn.com/tfs/TB1KtN6mKH2gK0jSZJnXXaT1FXa-1014-200.png",alt:"logo"})}),(0,x.jsxs)("div",{className:v().desc,children:[(0,x.jsx)("span",{onClick:J,className:Q?void 0:v().active,children:"\u8d26\u6237\u5bc6\u7801\u767b\u5f55"}),(0,x.jsx)(a.Z,{direction:"ver"}),(0,x.jsx)("span",{onClick:$,className:Q?v().active:void 0,children:"\u624b\u673a\u53f7\u767b\u5f55"})]}),(0,x.jsxs)(r.Z,{value:q,onChange:P,size:"large",children:[Q?G:H,(0,x.jsxs)("div",{className:v().infoLine,children:[(0,x.jsx)(w,{style:{marginBottom:0},children:(0,x.jsx)(l.Z,{name:"autoLogin",className:v().infoLeft,children:"\u81ea\u52a8\u767b\u5f55"})}),(0,x.jsx)("div",{children:(0,x.jsx)("a",{href:"/",className:v().link,children:"\u5fd8\u8bb0\u5bc6\u7801"})})]}),(0,x.jsx)(w,{style:{marginBottom:10},children:(0,x.jsx)(r.Z.Submit,{type:"primary",htmlType:"submit",onClick:V,className:v().submitBtn,validate:!0,children:"\u767b\u5f55"})}),(0,x.jsxs)("div",{className:v().infoLine,children:[(0,x.jsxs)("div",{className:v().infoLeft,children:["\u5176\u4ed6\u767b\u5f55\u65b9\u5f0f ",(0,x.jsx)(c.Z,{type:"atm",size:"small"})," ",(0,x.jsx)(c.Z,{type:"atm",size:"small"})," ",(0,x.jsx)(c.Z,{type:"atm",size:"small"})]}),(0,x.jsx)("a",{href:"/",className:v().link,children:"\u6ce8\u518c\u8d26\u53f7"})]})]})]})})},I=Z;function S(){return(0,x.jsx)("div",{className:"Login-page",children:(0,x.jsx)(I,{})})}var A,C=S},62856:function(e){e.exports={LoginBlock:"LoginBlock--LoginBlock--14N5omi",innerBlock:"LoginBlock--innerBlock--n92n1gc",logo:"LoginBlock--logo--swKl-ms",infoLine:"LoginBlock--infoLine--3r8gycm",infoLeft:"LoginBlock--infoLeft--2V1Es5p",desc:"LoginBlock--desc--nzKi_4A",active:"LoginBlock--active--1pLEYkQ",line:"LoginBlock--line--39n9TLf",innerBeforeInput:"LoginBlock--innerBeforeInput--3EyQP7M",innerAfterInput:"LoginBlock--innerAfterInput--2vUoApC",sendCode:"LoginBlock--sendCode--iyEXNX8",otherLogin:"LoginBlock--otherLogin--2YnGQI0",icon:"LoginBlock--icon--28qWEYX",link:"LoginBlock--link--1Ao0Sgc",submitBtn:"LoginBlock--submitBtn--2zkmWKW"}}}]);